<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>CombineHarvester: ch::BinByBinFactory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 70px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CombineHarvester
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classch_1_1_bin_by_bin_factory.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">ch::BinByBinFactory Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Merges bin uncertainties and creates bin-by-bin statistical uncertainties.  
 <a href="classch_1_1_bin_by_bin_factory.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="_bin_by_bin_8h_source.html">/afs/cern.ch/user/a/agilbert/CMSSW_14_1_0_pre4/src/CombineHarvester/CombineTools/interface/BinByBin.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad83ac54b41f5ee9eabc33866bb61b834"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#ad83ac54b41f5ee9eabc33866bb61b834">BinByBinFactory</a> ()</td></tr>
<tr class="separator:ad83ac54b41f5ee9eabc33866bb61b834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e0495e815c6a5ac41b45fb200b860cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#a6e0495e815c6a5ac41b45fb200b860cf">MergeBinErrors</a> (<a class="el" href="classch_1_1_combine_harvester.html">CombineHarvester</a> &amp;cb)</td></tr>
<tr class="memdesc:a6e0495e815c6a5ac41b45fb200b860cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Merges histogram bin errors between processes.  <a href="classch_1_1_bin_by_bin_factory.html#a6e0495e815c6a5ac41b45fb200b860cf">More...</a><br /></td></tr>
<tr class="separator:a6e0495e815c6a5ac41b45fb200b860cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab097f067dce0a722af70dd86bf1b5398"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#ab097f067dce0a722af70dd86bf1b5398">AddBinByBin</a> (<a class="el" href="classch_1_1_combine_harvester.html">CombineHarvester</a> &amp;src, <a class="el" href="classch_1_1_combine_harvester.html">CombineHarvester</a> &amp;dest)</td></tr>
<tr class="memdesc:ab097f067dce0a722af70dd86bf1b5398"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create bin-by-bin shape uncertainties for every process in <b>src</b>, and add these to <b>dest</b>  <a href="classch_1_1_bin_by_bin_factory.html#ab097f067dce0a722af70dd86bf1b5398">More...</a><br /></td></tr>
<tr class="separator:ab097f067dce0a722af70dd86bf1b5398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9873544209128b4d1dcbf9d897fe1094"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#a9873544209128b4d1dcbf9d897fe1094">MergeAndAdd</a> (<a class="el" href="classch_1_1_combine_harvester.html">CombineHarvester</a> &amp;src, <a class="el" href="classch_1_1_combine_harvester.html">CombineHarvester</a> &amp;dest)</td></tr>
<tr class="memdesc:a9873544209128b4d1dcbf9d897fe1094"><td class="mdescLeft">&#160;</td><td class="mdescRight">A convenience function which calls <a class="el" href="classch_1_1_bin_by_bin_factory.html#a6e0495e815c6a5ac41b45fb200b860cf">MergeBinErrors</a> and <a class="el" href="classch_1_1_bin_by_bin_factory.html#ab097f067dce0a722af70dd86bf1b5398">AddBinByBin</a> in turn.  <a href="classch_1_1_bin_by_bin_factory.html#a9873544209128b4d1dcbf9d897fe1094">More...</a><br /></td></tr>
<tr class="separator:a9873544209128b4d1dcbf9d897fe1094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ac5cd6b06c95b4bee7449dbde576067"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#a8ac5cd6b06c95b4bee7449dbde576067">SetVerbosity</a> (unsigned verbosity)</td></tr>
<tr class="memdesc:a8ac5cd6b06c95b4bee7449dbde576067"><td class="mdescLeft">&#160;</td><td class="mdescRight">By default this class only produces output on the screen when an error occurs, set to a value greater than zero for more verbose output.  <a href="classch_1_1_bin_by_bin_factory.html#a8ac5cd6b06c95b4bee7449dbde576067">More...</a><br /></td></tr>
<tr class="separator:a8ac5cd6b06c95b4bee7449dbde576067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a022063406869d59a03e7aef47ce53e34"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#a022063406869d59a03e7aef47ce53e34">SetAddThreshold</a> (double val)</td></tr>
<tr class="memdesc:a022063406869d59a03e7aef47ce53e34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the fractional bin error threshold for bin-by-bin creation and for participation in the merging algorithm.  <a href="classch_1_1_bin_by_bin_factory.html#a022063406869d59a03e7aef47ce53e34">More...</a><br /></td></tr>
<tr class="separator:a022063406869d59a03e7aef47ce53e34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa983d4e391adbf5a7af40458a3ffc062"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#aa983d4e391adbf5a7af40458a3ffc062">SetMergeThreshold</a> (double val)</td></tr>
<tr class="memdesc:aa983d4e391adbf5a7af40458a3ffc062"><td class="mdescLeft">&#160;</td><td class="mdescRight">The threshold for the merging algorithm.  <a href="classch_1_1_bin_by_bin_factory.html#aa983d4e391adbf5a7af40458a3ffc062">More...</a><br /></td></tr>
<tr class="separator:aa983d4e391adbf5a7af40458a3ffc062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f8c2b763538030dcab6cd3566b27568"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#a4f8c2b763538030dcab6cd3566b27568">SetPattern</a> (std::string const &amp;pattern)</td></tr>
<tr class="memdesc:a4f8c2b763538030dcab6cd3566b27568"><td class="mdescLeft">&#160;</td><td class="mdescRight">The pattern-string for the systematic naming convention.  <a href="classch_1_1_bin_by_bin_factory.html#a4f8c2b763538030dcab6cd3566b27568">More...</a><br /></td></tr>
<tr class="separator:a4f8c2b763538030dcab6cd3566b27568"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05d997b69c619df3c2f7d20e4e7106b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#a05d997b69c619df3c2f7d20e4e7106b7">SetFixNorm</a> (bool fix)</td></tr>
<tr class="memdesc:a05d997b69c619df3c2f7d20e4e7106b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether or not the bin-by-bin systematics are allowed to vary the process normalisation.  <a href="classch_1_1_bin_by_bin_factory.html#a05d997b69c619df3c2f7d20e4e7106b7">More...</a><br /></td></tr>
<tr class="separator:a05d997b69c619df3c2f7d20e4e7106b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76d34782e2b31e762f07093e7d3748ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#a76d34782e2b31e762f07093e7d3748ab">SetPoissonErrors</a> (bool poisson_errors)</td></tr>
<tr class="memdesc:a76d34782e2b31e762f07093e7d3748ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct approximate Poisson uncertainties instead of default Gaussian.  <a href="classch_1_1_bin_by_bin_factory.html#a76d34782e2b31e762f07093e7d3748ab">More...</a><br /></td></tr>
<tr class="separator:a76d34782e2b31e762f07093e7d3748ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57a7a111d2b683912cb70e5e9786432c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#a57a7a111d2b683912cb70e5e9786432c">SetMergeZeroBins</a> (bool merge)</td></tr>
<tr class="memdesc:a57a7a111d2b683912cb70e5e9786432c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set whether bins with zero content can participate in the merging procedure.  <a href="classch_1_1_bin_by_bin_factory.html#a57a7a111d2b683912cb70e5e9786432c">More...</a><br /></td></tr>
<tr class="separator:a57a7a111d2b683912cb70e5e9786432c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7240cc3c8d9be4d77e3e041256397e8f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#a7240cc3c8d9be4d77e3e041256397e8f">SetMergeSaturatedBins</a> (bool merge)</td></tr>
<tr class="memdesc:a7240cc3c8d9be4d77e3e041256397e8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set whether bins with error &gt;= content participate in the merging procedure.  <a href="classch_1_1_bin_by_bin_factory.html#a7240cc3c8d9be4d77e3e041256397e8f">More...</a><br /></td></tr>
<tr class="separator:a7240cc3c8d9be4d77e3e041256397e8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0287bddb9ddd5ce6a2c00e8e2d092553"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#a0287bddb9ddd5ce6a2c00e8e2d092553">GetVerbosity</a> ()</td></tr>
<tr class="memdesc:a0287bddb9ddd5ce6a2c00e8e2d092553"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter functions for class attributes.  <a href="classch_1_1_bin_by_bin_factory.html#a0287bddb9ddd5ce6a2c00e8e2d092553">More...</a><br /></td></tr>
<tr class="separator:a0287bddb9ddd5ce6a2c00e8e2d092553"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a466ad7528bd24e06dd48545a62695fc3"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#a466ad7528bd24e06dd48545a62695fc3">GetAddThreshold</a> ()</td></tr>
<tr class="separator:a466ad7528bd24e06dd48545a62695fc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8d08a80d3b39a82b45cd47fb6ac1181"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#ad8d08a80d3b39a82b45cd47fb6ac1181">GetMergeThreshold</a> ()</td></tr>
<tr class="separator:ad8d08a80d3b39a82b45cd47fb6ac1181"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6807dbf5552c3dbdf96204c506e44143"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#a6807dbf5552c3dbdf96204c506e44143">GetPattern</a> ()</td></tr>
<tr class="separator:a6807dbf5552c3dbdf96204c506e44143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfa5acf851e5bc60cb444ab99154fe0b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#abfa5acf851e5bc60cb444ab99154fe0b">GetFixNorm</a> ()</td></tr>
<tr class="separator:abfa5acf851e5bc60cb444ab99154fe0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3039403328320d2f2b44fed582da6445"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#a3039403328320d2f2b44fed582da6445">GetPoissonErrors</a> ()</td></tr>
<tr class="separator:a3039403328320d2f2b44fed582da6445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac086255693968d3f93a6599e4eb84a06"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#ac086255693968d3f93a6599e4eb84a06">GetMergeZeroBins</a> ()</td></tr>
<tr class="separator:ac086255693968d3f93a6599e4eb84a06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7a3cd16dbec7d10aefef145b56eb20d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classch_1_1_bin_by_bin_factory.html#ac7a3cd16dbec7d10aefef145b56eb20d">GetMergeSaturatedBins</a> ()</td></tr>
<tr class="separator:ac7a3cd16dbec7d10aefef145b56eb20d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Merges bin uncertainties and creates bin-by-bin statistical uncertainties. </p>
<p>Typical usage: </p><pre class="fragment">auto bbb = ch::BinByBinFactory()
    .SetAddThreshold(0.1)
    .SetMergeThreshold(0.5)
    .SetFixNorm(true);
bbb.MergeBinErrors(cb.cp().backgrounds());
bbb.AddBinByBin(cb.cp().backgrounds(), cb);
</pre><p> See below for details on each class method. </p>

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00021">21</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad83ac54b41f5ee9eabc33866bb61b834"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad83ac54b41f5ee9eabc33866bb61b834">&#9670;&nbsp;</a></span>BinByBinFactory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ch::BinByBinFactory::BinByBinFactory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8cc_source.html#l00011">11</a> of file <a class="el" href="_bin_by_bin_8cc_source.html">BinByBin.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6e0495e815c6a5ac41b45fb200b860cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e0495e815c6a5ac41b45fb200b860cf">&#9670;&nbsp;</a></span>MergeBinErrors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ch::BinByBinFactory::MergeBinErrors </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classch_1_1_combine_harvester.html">CombineHarvester</a> &amp;&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Merges histogram bin errors between processes. </p>
<p>The method will loop through each analysis category and apply the merging algorithm to the histograms of all processes within that category:</p>
<ul>
<li>In a given histogram bin consider contributions from the \(j\) processes with bin contents \(x_{i}\), bin errors \(e_{i}\) and with \(e_{i}/x_{i}\) larger than the bin-by-bin addition threshold (<a class="el" href="classch_1_1_bin_by_bin_factory.html#a022063406869d59a03e7aef47ce53e34">SetAddThreshold</a>). Note that by setting this threshold to zero the contributions from all processes will be considered.</li>
<li>Evaluate the total squared uncertainty from these processes: \(e_{TOT}^{2} = e_{1}^{2} + e_{2}^{2} + ... + e_{j}^{2} \)</li>
<li>Rank bins from lowest to highest fraction error: \(e_{i}^{2}/e_{TOT}^{2}\)</li>
<li>Start removing bin errors from the lowest ranked bins as long as the total sum of squared error removed ( \(r_{sub}\)) is less than the merge threshold (<a class="el" href="classch_1_1_bin_by_bin_factory.html#aa983d4e391adbf5a7af40458a3ffc062">SetMergeThreshold</a>).</li>
<li>Once as many bin errors have been removed as possible, scale up the remaining errors by a factor \(\sqrt{1/(1-r_{sub})}\), which ensure the total bin error from all processes remains the same.</li>
<li>Note that the <a class="el" href="classch_1_1_bin_by_bin_factory.html" title="Merges bin uncertainties and creates bin-by-bin statistical uncertainties.">BinByBinFactory</a> default is a merging threshold of zero, in which no merging takes place. The most extreme threshold is 1, in which all errors will be merged into a single process.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>For a valid result all analysis event categories must have a unique <code>bin()</code> value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8cc_source.html#l00022">22</a> of file <a class="el" href="_bin_by_bin_8cc_source.html">BinByBin.cc</a>.</p>

</div>
</div>
<a id="ab097f067dce0a722af70dd86bf1b5398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab097f067dce0a722af70dd86bf1b5398">&#9670;&nbsp;</a></span>AddBinByBin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ch::BinByBinFactory::AddBinByBin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classch_1_1_combine_harvester.html">CombineHarvester</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classch_1_1_combine_harvester.html">CombineHarvester</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create bin-by-bin shape uncertainties for every process in <b>src</b>, and add these to <b>dest</b> </p>
<p>The behaviour of this function is controlled by three parameters:</p>
<ul>
<li>The first is the uncertainty threshold which determines whether a systematic will be created for a given histogram bin (<a class="el" href="classch_1_1_bin_by_bin_factory.html#a022063406869d59a03e7aef47ce53e34">SetAddThreshold</a>). For a bin with content \(x\) and bin error \(e\), this threshold is thefractional error \(e/x\).</li>
<li>The second parameters (<a class="el" href="classch_1_1_bin_by_bin_factory.html#a05d997b69c619df3c2f7d20e4e7106b7">SetFixNorm</a>) is a flag that when set to <code>true</code> will re-normalize the up and down shape templates to have the same integral as the nominal. This means the nuisance parameter for this bin is only able to change the shape of the distribution: if a bin is shifted up, all other bins are shifted down slightly to preserve the normalisation. This feature is useful when the statistical uncertainty in the process yield is considered as an independent nuisance parameter.</li>
<li>The third parameters is a pattern-string which prescribes how the bin-by-bin uncertainties should be named. By default this is <code>CMS_$ANALYSIS_$CHANNEL_$BIN_$ERA_$PROCESS_bin_$#</code>, but can be changed with <a class="el" href="classch_1_1_bin_by_bin_factory.html#a4f8c2b763538030dcab6cd3566b27568">SetPattern</a>. Note that the special term <code>$#</code> should always be included as this is replaced with the bin index. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8cc_source.html#l00105">105</a> of file <a class="el" href="_bin_by_bin_8cc_source.html">BinByBin.cc</a>.</p>

</div>
</div>
<a id="a9873544209128b4d1dcbf9d897fe1094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9873544209128b4d1dcbf9d897fe1094">&#9670;&nbsp;</a></span>MergeAndAdd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ch::BinByBinFactory::MergeAndAdd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classch_1_1_combine_harvester.html">CombineHarvester</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classch_1_1_combine_harvester.html">CombineHarvester</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A convenience function which calls <a class="el" href="classch_1_1_bin_by_bin_factory.html#a6e0495e815c6a5ac41b45fb200b860cf">MergeBinErrors</a> and <a class="el" href="classch_1_1_bin_by_bin_factory.html#ab097f067dce0a722af70dd86bf1b5398">AddBinByBin</a> in turn. </p>

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8cc_source.html#l00202">202</a> of file <a class="el" href="_bin_by_bin_8cc_source.html">BinByBin.cc</a>.</p>

</div>
</div>
<a id="a8ac5cd6b06c95b4bee7449dbde576067"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ac5cd6b06c95b4bee7449dbde576067">&#9670;&nbsp;</a></span>SetVerbosity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a>&amp; ch::BinByBinFactory::SetVerbosity </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>verbosity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>By default this class only produces output on the screen when an error occurs, set to a value greater than zero for more verbose output. </p>

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00090">90</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="a022063406869d59a03e7aef47ce53e34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a022063406869d59a03e7aef47ce53e34">&#9670;&nbsp;</a></span>SetAddThreshold()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a>&amp; ch::BinByBinFactory::SetAddThreshold </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the fractional bin error threshold for bin-by-bin creation and for participation in the merging algorithm. </p>

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00099">99</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="aa983d4e391adbf5a7af40458a3ffc062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa983d4e391adbf5a7af40458a3ffc062">&#9670;&nbsp;</a></span>SetMergeThreshold()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a>&amp; ch::BinByBinFactory::SetMergeThreshold </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The threshold for the merging algorithm. </p>

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00107">107</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="a4f8c2b763538030dcab6cd3566b27568"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f8c2b763538030dcab6cd3566b27568">&#9670;&nbsp;</a></span>SetPattern()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a>&amp; ch::BinByBinFactory::SetPattern </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>pattern</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The pattern-string for the systematic naming convention. </p>

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00115">115</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="a05d997b69c619df3c2f7d20e4e7106b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05d997b69c619df3c2f7d20e4e7106b7">&#9670;&nbsp;</a></span>SetFixNorm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a>&amp; ch::BinByBinFactory::SetFixNorm </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fix</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether or not the bin-by-bin systematics are allowed to vary the process normalisation. </p>

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00124">124</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="a76d34782e2b31e762f07093e7d3748ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76d34782e2b31e762f07093e7d3748ab">&#9670;&nbsp;</a></span>SetPoissonErrors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a>&amp; ch::BinByBinFactory::SetPoissonErrors </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>poisson_errors</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct approximate Poisson uncertainties instead of default Gaussian. </p>

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00132">132</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="a57a7a111d2b683912cb70e5e9786432c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57a7a111d2b683912cb70e5e9786432c">&#9670;&nbsp;</a></span>SetMergeZeroBins()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a>&amp; ch::BinByBinFactory::SetMergeZeroBins </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>merge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set whether bins with zero content can participate in the merging procedure. </p>

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00140">140</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="a7240cc3c8d9be4d77e3e041256397e8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7240cc3c8d9be4d77e3e041256397e8f">&#9670;&nbsp;</a></span>SetMergeSaturatedBins()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classch_1_1_bin_by_bin_factory.html">BinByBinFactory</a>&amp; ch::BinByBinFactory::SetMergeSaturatedBins </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>merge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set whether bins with error &gt;= content participate in the merging procedure. </p>

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00148">148</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="a0287bddb9ddd5ce6a2c00e8e2d092553"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0287bddb9ddd5ce6a2c00e8e2d092553">&#9670;&nbsp;</a></span>GetVerbosity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned ch::BinByBinFactory::GetVerbosity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Getter functions for class attributes. </p>

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00156">156</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="a466ad7528bd24e06dd48545a62695fc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a466ad7528bd24e06dd48545a62695fc3">&#9670;&nbsp;</a></span>GetAddThreshold()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ch::BinByBinFactory::GetAddThreshold </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00157">157</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="ad8d08a80d3b39a82b45cd47fb6ac1181"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8d08a80d3b39a82b45cd47fb6ac1181">&#9670;&nbsp;</a></span>GetMergeThreshold()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ch::BinByBinFactory::GetMergeThreshold </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00158">158</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="a6807dbf5552c3dbdf96204c506e44143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6807dbf5552c3dbdf96204c506e44143">&#9670;&nbsp;</a></span>GetPattern()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string ch::BinByBinFactory::GetPattern </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00159">159</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="abfa5acf851e5bc60cb444ab99154fe0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfa5acf851e5bc60cb444ab99154fe0b">&#9670;&nbsp;</a></span>GetFixNorm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ch::BinByBinFactory::GetFixNorm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00160">160</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="a3039403328320d2f2b44fed582da6445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3039403328320d2f2b44fed582da6445">&#9670;&nbsp;</a></span>GetPoissonErrors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ch::BinByBinFactory::GetPoissonErrors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00161">161</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="ac086255693968d3f93a6599e4eb84a06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac086255693968d3f93a6599e4eb84a06">&#9670;&nbsp;</a></span>GetMergeZeroBins()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ch::BinByBinFactory::GetMergeZeroBins </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00162">162</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<a id="ac7a3cd16dbec7d10aefef145b56eb20d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7a3cd16dbec7d10aefef145b56eb20d">&#9670;&nbsp;</a></span>GetMergeSaturatedBins()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ch::BinByBinFactory::GetMergeSaturatedBins </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_bin_by_bin_8h_source.html#l00163">163</a> of file <a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>CombineTools/interface/<a class="el" href="_bin_by_bin_8h_source.html">BinByBin.h</a></li>
<li>CombineTools/src/<a class="el" href="_bin_by_bin_8cc_source.html">BinByBin.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
</body>
</html>
